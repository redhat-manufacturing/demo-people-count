import{j as e,F as y,a,B as v,I as u,L as w,t as r,C as N,r as h,S}from"./index-1201fba5.js";import{A as g}from"./axios-aaa1c0c0.js";import{A as k}from"./index.esm-98c677b3.js";const x=({text:o,bg:s,padding:l,handleClick:i,idName:d,icon:n})=>e(y,{children:a("button",{id:d,onClick:i,className:`${l||"px-6 py-2"} text-sm   font-semibold uppercase relative flex space-x-2 items-center rounded  transition ${s}`,children:[e("span",{children:n}),e("span",{children:o})]})}),P=({setLoading:o})=>{const{register:s,handleSubmit:l,reset:i,watch:d,formState:{errors:n,isSubmitting:p}}=v({defaultValues:{camera_type:"IP",input:"",output:"output.mp4",rtsp:""}}),f=d("camera_type");return a("div",{className:"bg-core-widget  shadow-lg  max-w-2xl  filter drop-shadow-lg rounded p-10",children:[a("div",{className:"text-center mb-10",children:[e("h1",{className:"font-bold text-3xl text-core-title",children:"Pipeline"}),e("hr",{className:"my-4 border border-[#171c27]"})]}),a("form",{className:"w-full space-y-3 font-medium ",onSubmit:l(async c=>{o(!0);const t=new FormData;t.append("camera",c.camera_type),t.append("output",c.output),c.camera_type==="USB"?t.append("input",c.input):t.append("input",c.rtsp);try{const{data:m}=await g.post("/start_process",t);m.status_code==="100"?(r.success(m.msg),i()):m.status_code==="111"?r.info(m.msg):r.error(m.msg),o(!1)}catch(m){r.error(m.message),o(!1)}}),children:[a("div",{className:"flex flex-col  ",children:[e("label",{htmlFor:"RTSP",className:"text-sm uppercase text-[#9ba8c4] font-medium px-1",children:"Select Camera Type"}),a("fieldset",{className:"inline-flex pl-1 py-3 lg:gap-10 gap-5  ",children:[e("legend",{className:"sr-only ",children:"Select Camera Type"}),a("div",{className:"flex items-center  ",children:[e("input",{id:"camera-type-1",type:"radio",name:"camera-type",value:"IP",...s("camera_type"),className:"h-5 w-5    focus:ring-2 accent-[#4675af] focus:ring-indigo-500","aria-labelledby":"camera-type-1","aria-describedby":"camera-type-1"}),e("label",{htmlFor:"camera-type-1",className:"text-base text-[#9ba8c4] cursor-pointer font-semibold  ml-2 block",children:"IP Camera"})]}),a("div",{className:"flex items-center ",children:[e("input",{id:"camera-type-2",type:"radio",name:"camera-type",value:"USB",...s("camera_type"),className:"h-5 w-5  focus:ring-2 accent-[#4675af] focus:ring-indigo-500","aria-labelledby":"camera-type-2","aria-describedby":"camera-type-2"}),e("label",{htmlFor:"camera-type-2",className:"text-base text-[#9ba8c4] cursor-pointer font-semibold  ml-2 block",children:"USB Camera"})]})]})]}),f==="IP"?e(u,{label:"RTSP",register:s,required:!0,cls:"",placeholder:"RTSP",type:"text",state:"rtsp",errors:n,icon:e("svg",{fill:"none",className:"w-5 h-5 text-gray-500",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e("path",{strokeLinecap:"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z"})})}):e(u,{label:"INPUT",register:s,required:!0,cls:"",placeholder:"INPUT",type:"text",state:"input",errors:n,icon:e("svg",{fill:"none",className:"w-5 h-5 text-gray-500",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5l-3.9 19.5m-2.1-19.5l-3.9 19.5"})})}),e(u,{label:"OUTPUT",register:s,required:!0,cls:"",placeholder:"output.mp4",type:"text",state:"output",errors:n,icon:e("svg",{fill:"none",stroke:"currentColor",className:"w-5 h-5 text-gray-500",strokeWidth:"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})}),e("div",{className:"pt-5",children:e("button",{type:"submit",disabled:p,className:`${Object.keys(n).length===0?"bg-indigo-500 hover:bg-indigo-700 focus:bg-indigo-700 text-white cursor-pointer":"bg-dark-bg  text-gray-400 hover:bg-[#18172a] cursor-not-allowed"} font-semibold  uppercase leading-none   focus:outline-none rounded  py-4 px-10   ease-in-out duration-300`,children:p?e(w,{name:"Please Wait..."}):e("div",{className:"font-bold",children:"Start"})})})]})]})},_=({setModalIsOpen:o,message:s,handleAgreeButton:l})=>(N(),a("div",{className:"min-w-screen h-screen animated fadeIn faster  fixed  left-0 top-0 flex justify-center items-center inset-0 z-[999] outline-none focus:outline-none bg-no-repeat bg-center bg-cover",id:"modal-id",children:[e("div",{className:"absolute bg-black opacity-70 inset-0 z-0"}),e("div",{className:"w-full  max-w-lg py-5 relative mx-auto my-auto rounded-xl shadow-lg  bg-[#1c1c28] ",children:a("div",{className:"",children:[a("div",{className:"text-center p-5 flex-auto justify-center space-y-7",children:[e("div",{children:e("h2",{className:"text-3xl font-bold text-[#ff3b3b] py-4 ",children:s})}),e("hr",{className:"w-full border-[#28293d]"}),a("div",{className:"flex items-center flex-col justify-center text-center space-y-3",children:[e("p",{className:"text-3xl  text-gray-700 font-bold",children:"This action cannot be undone"}),a("p",{className:"text-[#fccc75] text-sm",children:["Click ",e("span",{className:"font-semibold",children:"Agree"})," to continue"]})]}),e("hr",{className:"w-full border-[#28293d]"})]}),a("div",{className:"p-3  mt-2 text-center space-x-4 md:block",children:[e("button",{onClick:l,className:"px-5 py-2 text-sm shadow-sm font-semibold tracking-wider text-white rounded-full hover:shadow-lg bg-[#6698ff]   hover:bg-[#3568d4]    ",children:"Agree"}),e("button",{onClick:()=>o(!1),className:"mb-2 md:mb-0  px-5 py-2 text-sm shadow-sm font-medium tracking-wider border-2 border-gray-500 text-gray-500 rounded-full hover:shadow-lg hover:text-gray-900 hover:bg-gray-500",children:"Cancel"})]})]})})]})),C=()=>{const[o,s]=h.useState(!1),[l,i]=h.useState(!1),[d,n]=h.useState("");return a("div",{children:[a("div",{className:"grid lg:grid-cols-2   min-h-screen  place-items-center  gap-20 px-10",children:[e("div",{className:"order-2 lg:order-1 w-full",children:e(P,{setLoading:s})}),e("div",{className:"order-1 lg:order-2",children:a("div",{className:"flex  gap-10 flex-col md:flex-row lg:flex-col  ",children:[e(x,{text:"Stop Processing",idName:"activate-btn",handleClick:()=>{i(!l),n("Stop Process")},padding:"px-6 lg:px-9 py-3",icon:e(k,{size:24}),bg:"bg-rose-500 hover:bg-gray-600 text-white"}),e(x,{text:"Stop Streaming",idName:"activate-btn",handleClick:()=>{i(!l),n("Stop Stream")},icon:a("svg",{className:"w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})]}),padding:"px-7 lg:px-10 py-3",bg:"bg-rose-500 hover:bg-gray-600 text-white"})]})})]}),l&&e(_,{message:d,handleAgreeButton:async()=>{if(s(!0),d==="Stop Process"){const c=new FormData;try{const{data:t}=await g.post("/stop_process",c);t.status_code==="100"?r.success(t.msg):t.status_code==="111"?r.info(t.msg):t.status_code==="223"?r.error(t.msg):t.status_code==="224"&&r.error(t.msg),s(!1)}catch(t){r.error(t.message),s(!1)}}else if(d==="Stop Stream"){const c=new FormData;try{const{data:t}=await g.post("/stop_streaming",c);t.status_code==="101"?r.success(t.msg):t.status_code==="111"?r.info(t.msg):t.status_code==="112"?r.info(t.msg):t.status_code==="223"?r.error(t.msg):t.status_code==="224"&&r.error(t.msg),s(!1)}catch(t){r.error(t.message),s(!1)}}i(!1),s(!1)},setModalIsOpen:i}),o?e(S,{}):null]})},L=()=>e("div",{children:e(C,{})});export{L as Pipeline,L as default};
